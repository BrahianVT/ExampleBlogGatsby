{"componentChunkName":"component---src-templates-blog-post-js","path":"/jvm-ergonomics/","result":{"data":{"site":{"siteMetadata":{"title":"Java Performace "}},"markdownRemark":{"id":"5a00ad73-5428-54bc-b683-ed17cb365844","excerpt":"Is the process by which the Java Virtual Machine and garbage collection heuristics, improve application performance. The JVM provides platform-dependent default…","html":"<p>Is the process by which the Java Virtual Machine and garbage collection heuristics, improve application performance.</p>\n<p>The JVM provides platform-dependent default selections for the garbage collector, heap size and runtime compiler. These selections match the needs of different types of applications while requiring less command-line tuning. In addition, behavior-based tuning dynamically optimizes the sizes of the heap to meet a specified behavior of the application.</p>\n<h2>Garbage Collector, Heap, and Runtime Compiler Defaults Selections</h2>\n<p>These are important garbage collector, heap size, and runtime compiler default selections:</p>\n<ul>\n<li>Garbage-First (G1) collector</li>\n<li>The maximum number of GC threads is limited by the heap size and availible CPU resources</li>\n<li>Initial heap size of 1/64 of physical memory</li>\n<li>Maximum heap size of 1/4 of physical memory</li>\n<li>Tiered compiler, using both C1 and C2</li>\n</ul>\n<p>The Java HotSpot VM garbage collectors can be configured to preferentially meet one of the next goals:</p>\n<ul>\n<li>Maximum pause-time goal</li>\n<li>Application throughput</li>\n<li>Footprint</li>\n</ul>\n<h3>Maximum Pause-Time Goal</h3>\n<p>The pause time is the duration which the garbage collector stops the application and recovers space that’s no longet in use.\nThe intent of the maximum pause-time goal is to limit the longest of these pauses. An average time for pauses and a variance on that average is maintained by the garbage collector.\nThe average is taken for the start of the execution, but it’s weighted so that more recent pauses count more heavily. If the average plus the variance of the pause-time is greater than the maximum pause-time goal, then the garbage collector\nconsiders that the goal isn’t being met. The maximum pause-time goal is specified with the command option <em>“XX:MAXGCPauseMillis=nnn”</em>.\nThe garbage collector adjunts the Java heap size and other parameters related to garbage collection in an attempt to keep garbage collection\npauses shorter than <em>“nnn”</em>.</p>\n<h3>Throughput Goal</h3>\n<p>The throughput goal is measured in terms of the time spent collecting garbage and the time spent outside of the garbage collection.\nThe goal is specified by the command-line option <em>“-XX:GCTimeRatio=nnn”</em>. The ratio of the garbage collection time to application is <em>1/(1+nnn)</em>.\nFor example, <em>“-XX:GCTimeRatio=19”</em> sets a goal of 1/20th or 5% of the total time for garbage collection.\nThe time spent in garbage collection is the total time for all garbage collection induced pauses.If the throughput goal isn’t being met, then one possible action for the garbage collector is to increase the size of the heap so the time spent in the appplication between collection pauses can be longer.</p>\n<h3>Footprint</h3>\n<p>If the throughput and maximum pause-time goals have been met, then garbage collector reduces the size of the heap until one goal can’t be met.</p>\n<h3>Tuning Strategy</h3>\n<p>The heap grows or shrinks to a size that supports the chosen throughput goal. Don’t choose a maximum value for the heap unless you know that you need a heap greater than the default maximum heap size.\nIf the heap grows to its maximum size and the throughput goal isn’t being met, then the maximum heap size is too small for the throughput goal. Set the maximum heap size to a value that’s close to the total physical memory on the platform,\nbut doesn´t cause swapping of the application.Execute the application again. If the throughput goal isn’t met, then the goal for the application time is too high for the available memory on the platform.\nIf the throughput goal can be met, but the pauses are too long, then select a maximum pause-time goal. Choosing a maximum pause-time goal may mean that your throughput goal won’t be met, so choose values that are an acceptable compromise for\nthe application. </p>","frontmatter":{"title":"JVM Ergonomics","date":"June 25, 2021","description":"Is the process by which the Java Virtual Machine and garbage collection heuristics, improve application performance."}},"previous":{"fields":{"slug":"/garbage-collector/"},"frontmatter":{"title":"What is a Garbage Collector"}},"next":{"fields":{"slug":"/garbage-collector-impl/"},"frontmatter":{"title":"Garbage Collector implementation"}}},"pageContext":{"id":"5a00ad73-5428-54bc-b683-ed17cb365844","previousPostId":"dbcb05e8-192e-5a62-9b03-aed3d0aa1e89","nextPostId":"301ca8a8-82ea-503f-84e6-ba3df26dd058"}},"staticQueryHashes":["230163734","3589320610"]}